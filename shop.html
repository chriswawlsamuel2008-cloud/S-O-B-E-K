<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shop â€“ SGWEN X</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Poppins,sans-serif;background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff}
.center-box{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;gap:15px}
input{padding:10px;border-radius:6px;border:none}
button{padding:10px 20px;border:none;border-radius:6px;background:#ffd700;font-weight:bold;cursor:pointer}
nav{display:flex;justify-content:center;padding:20px 0;background:rgba(0,0,0,.5)}
nav ul{display:flex;gap:40px;list-style:none;padding:0}
nav a{color:#ffd700;text-decoration:none;font-weight:600}
#shop-content{display:none;padding:40px;text-align:center}
.items-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:25px;margin-top:30px}
.item-box{background:rgba(255,255,255,.1);padding:25px;border-radius:12px}
.counter{display:flex;justify-content:center;gap:12px;margin:12px 0}
.counter button{width:30px;height:30px}
#order-list{margin-top:40px;padding:25px;background:rgba(255,255,255,.1);border-radius:10px;border:1px solid #fff}
#send-btn{background:green;color:white;margin-top:20px}
</style>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<!-- ðŸ”¥ Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "PUT_API_KEY_HERE",
  authDomain: "SGWEN-X.firebaseapp.com",
  projectId: "SGWEN-X",
  appId: "PUT_APP_ID_HERE"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
setPersistence(auth, browserLocalPersistence);

let currentUserName = null;

onAuthStateChanged(auth, (user) => {
  if (user) {
    currentUserName = user.displayName || user.email;
    loginBox.style.display="none";
    shop-content.style.display="block";
  } else {
    loginBox.style.display="flex";
    shop-content.style.display="none";
  }
});

window.login = () => {
  signInWithEmailAndPassword(auth, emailInput.value, passInput.value)
    .catch(err => alert(err.message));
};

window.logout = () => signOut(auth);

window.getCurrentUserName = () => currentUserName;
</script>
</head>

<body>

<!-- ðŸ” LOGIN SCREEN -->
<div id="loginBox" class="center-box">
<h2>Login to SGWEN X</h2>
<input id="emailInput" placeholder="Email">
<input id="passInput" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<!-- ðŸ›’ SHOP -->
<div id="shop-content">
<nav>
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">Gallery</a></li>
<li><a href="#" onclick="logout()">Logout</a></li>
</ul>
</nav>

<h2>Shop Items</h2>
<div class="items-container">
<div class="item-box"><div>Tent</div><div class="counter"><button onclick="change('tent',-1)">-</button><span id="tent">0</span><button onclick="change('tent',1)">+</button></div><button onclick="addItem('Tent')">Add</button></div>
<div class="item-box"><div>Rope</div><div class="counter"><button onclick="change('rope',-1)">-</button><span id="rope">0</span><button onclick="change('rope',1)">+</button></div><button onclick="addItem('Rope')">Add</button></div>
<div class="item-box"><div>Wood</div><div class="counter"><button onclick="change('wood',-1)">-</button><span id="wood">0</span><button onclick="change('wood',1)">+</button></div><button onclick="addItem('Wood')">Add</button></div>
</div>

<div id="order-list">
<h3>Your Order:</h3>
<div id="order-items"></div>
<button id="send-btn" onclick="sendOrder()">Send Order</button>
</div>
</div>

<script>
let order=[];
function change(id,a){let el=document.getElementById(id);let n=parseInt(el.innerText)+a;if(n<0)n=0;el.innerText=n}
function addItem(n){let q=document.getElementById(n.toLowerCase()).innerText;if(q==0)return alert("Quantity must be > 0");order.push(`${n} x ${q}`);order-items.innerHTML=order.join("<br>")}

emailjs.init("R343iEUpx16F3VYfz");

function sendOrder(){
if(order.length==0)return alert("No items added");

const username=window.getCurrentUserName();

emailjs.send("service_21rqokl","template_hwaelip",{
username:username,
order_text:order.join("\n")
}).then(()=>{
send-btn.innerText="Sent";
order=[];order-items.innerHTML="";
["tent","rope","wood"].forEach(id=>document.getElementById(id).innerText="0");
setTimeout(()=>send-btn.innerText="Send Order",2000);
});
}
</script>

</body>
</html>
