<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shop ‚Äì SGWEN X</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Poppins,sans-serif;background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;overflow-x:hidden}
nav{display:flex;justify-content:center;padding:20px 0;background:rgba(0,0,0,.5);position:sticky;top:0;z-index:10}
nav ul{display:flex;gap:40px;list-style:none;margin:0;padding:0}
nav ul li a{text-decoration:none;color:#ffd700;font-weight:600;font-size:18px}
.fade{animation:fadeIn .8s ease-in-out}
@keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}
#password-screen{height:calc(100vh - 80px);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px}
.password-container{position:relative}
.password-container input{padding:12px 40px 12px 12px;border-radius:6px}
.toggle-eye{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer}
#shop-content{display:none;padding:40px 20px;text-align:center}
.items-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:25px;margin-top:30px}
.item-box{background:rgba(255,255,255,.1);padding:25px;border-radius:12px}
.counter{display:flex;justify-content:center;gap:12px;margin-bottom:12px}
.counter button{width:30px;height:30px;border:none;background:#ffd700;border-radius:5px}
.add-btn{padding:8px 20px;border:none;background:#ffd700;color:black;border-radius:5px;font-weight:bold}
#order-list{margin-top:40px;padding:25px;background:rgba(255,255,255,.1);border-radius:10px;border:1px solid #fff}
#send-btn{padding:12px 25px;border:none;background:green;color:white;font-weight:bold;border-radius:6px;margin-top:20px}
</style>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<!-- üî• Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "PUT_API_KEY_HERE",
  authDomain: "SGWEN-X.firebaseapp.com",
  projectId: "SGWEN-X",
  appId: "PUT_APP_ID_HERE"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let currentUserName = "Guest";
let authReady = false;

setPersistence(auth, browserLocalPersistence);

onAuthStateChanged(auth, (user) => {
  if (user) currentUserName = user.displayName || user.email;
  authReady = true;
});

window.getCurrentUserName = () => currentUserName;
window.isAuthReady = () => authReady;
</script>
</head>

<body>

<nav>
<ul>
<li><a href="home.html">Home</a></li>
<li><a href="archive.html">Archive</a></li>
<li><a href="gallery.html">Gallery</a></li>
<li><a href="calendar.html">Calendar</a></li>
</ul>
</nav>

<div id="password-screen" class="fade">
<h2>Enter Password</h2>
<div class="password-container">
<input type="password" id="pass">
<span class="toggle-eye" onclick="togglePassword()">üëÅÔ∏è</span>
</div>
<button onclick="checkPass()">Enter</button>
</div>

<div id="shop-content" class="fade">
<h2>Shop Items</h2>
<div class="items-container">
<div class="item-box"><div class="item-title">Tent</div><div class="counter"><button onclick="change('tent',-1)">-</button><span id="tent">0</span><button onclick="change('tent',1)">+</button></div><button class="add-btn" onclick="addItem('Tent')">Add</button></div>
<div class="item-box"><div class="item-title">Rope</div><div class="counter"><button onclick="change('rope',-1)">-</button><span id="rope">0</span><button onclick="change('rope',1)">+</button></div><button class="add-btn" onclick="addItem('Rope')">Add</button></div>
<div class="item-box"><div class="item-title">Wood</div><div class="counter"><button onclick="change('wood',-1)">-</button><span id="wood">0</span><button onclick="change('wood',1)">+</button></div><button class="add-btn" onclick="addItem('Wood')">Add</button></div>
<div class="item-box"><div class="item-title">Pots</div><div class="counter"><button onclick="change('pots',-1)">-</button><span id="pots">0</span><button onclick="change('pots',1)">+</button></div><button class="add-btn" onclick="addItem('Pots')">Add</button></div>
</div>

<div id="order-list">
<h3>Your Order:</h3>
<div id="order-items"></div>
<button id="send-btn" onclick="sendOrder()">Send Order</button>
</div>
</div>

<script>
document.getElementById("pass").addEventListener("keydown",e=>{if(e.key==="Enter")checkPass()})

function checkPass(){
  const pass=document.getElementById("pass").value;
  if(pass==="sgwen123"){
    document.getElementById("password-screen").style.display="none";
    document.getElementById("shop-content").style.display="block";
  } else alert("Wrong password!");
}

function togglePassword(){
  const input=document.getElementById("pass");
  input.type=input.type==="password"?"text":"password";
}

function change(id,a){
  let el=document.getElementById(id);
  let n=parseInt(el.innerText)+a;
  if(n<0)n=0;
  el.innerText=n;
}

let order=[];
function addItem(n){
  let q=document.getElementById(n.toLowerCase()).innerText;
  if(q==0)return alert("Quantity must be > 0");
  order.push(`${n} x ${q}`);
  document.getElementById("order-items").innerHTML=order.join("<br>");
}

emailjs.init("R343iEUpx16F3VYfz");

function sendOrder(){
  if(order.length==0){alert("No items added");return}
  if(!window.isAuthReady()){alert("Loading user...");return}

  const username=window.getCurrentUserName();

  emailjs.send("service_21rqokl","template_hwaelip",{
    username:username,
    order_text:order.join("\n")
  }).then(()=>{
    let b=document.getElementById("send-btn");
    b.innerText="Sent";
    order=[];
    document.getElementById("order-items").innerHTML="";
    ["tent","rope","wood","pots"].forEach(id=>document.getElementById(id).innerText="0");
    setTimeout(()=>b.innerText="Send Order",2000);
  })
}
</script>

</body>
</html>
